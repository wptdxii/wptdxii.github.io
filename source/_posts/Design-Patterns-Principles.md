---
title: 设计模式(Design Patterns)
date: 2017-08-07 23:45:03
tags: Design Patterns Principles 
categories: Design Patterns
---
面向对象有六大原则
<!-- more -->

# 单一职责原则

单元职责原则(Single Responsibility Principle，简称 SRP) 的定义是：
> 就一个类而言，应该仅有一个引起它变化的原因。简单点说就是，一个类中应该是一组相关性很高的函数、数据的封装。

单一职责的划分并不总是那么清晰，最大的问题是对职责的定义，什么时类的职责，以及怎么划分类的职责，很多时候都是需要通过个人经验来界定。

# 开闭原则

开闭原则(Open Close Principle，简称 OCP)的定义是：
> 软件中的对象(类、模块函数等)应该对扩展开放，对修改封闭。

理想情况下，程序一旦开发完成，其中的类的实现只应该因错误而被修改，新的或者改变的特性需要通过新的类实现，新建的类可以通过继承的方式复用原类的代码。但并不是绝对不可以修改原始类的，当代码明显有“坏味道"时，应该尽早重构。遵循开闭原则的重要手段是”抽象“。

# 里氏替换原则

里氏替换原则(Liskov's Substitution Principle，简称 LSP)的定义是：
> 如果对每一个系统类型为 S 的对象 SO，都有类型为 T 的对象 TO，使得以 T 定义的程序在所有的对象 TO 都代换成 SO 时， 程序的行为没有发生改变，那么类型 S 是类型 T 的子类型。简单点说就是，所有引用基类的地方必须能透明地使用其子类的对象。

面向对象(Object Oriented，简称 OO)的语言有三大特点：封装、继承和多态。里氏替换原则就是依赖于继承和多态两个特性。该原则通俗点讲就是，只要父类出现的地方子类就可以出现，而且替换为子类也不会产生任何错误和异常，使用者可能根本不需要知道是父类还是子类，但是，反过来就不行了，子类出现的地方，使用父类未必就可以。

里氏替换原则的核心原理是抽象，抽象又依赖“继承”这个特性。在面向对象编程(Object Oriented Programminmg，简称 OOP)中，继承有以下优点：

* 代码复用，减少创建类的成本，每个子类都拥有父类的属性和方法
* 代码的高扩展性

但同时有以下缺点：

* 继承是侵入性的，只要是继承就必须拥有父类所有的属性和方法，可能造成子类代码冗余

里氏替换原则和开闭原则是紧密联系的，里氏替换通过抽象建立规范，具体的实现在运行时替换掉抽象，保证系统的扩展性和灵活性，实现对扩展开发，对修改封闭。

# 依赖倒置原则

依赖倒置原则(Dependence Inversion Principle，简称 DIP) 的定义是：
> 高层模块不应该依赖低层模块，两者都应该依赖其抽象；抽象不应该依赖细节；细节应该依赖抽象。
> * 高层模块指的是调用端，实现了复杂的业务逻辑
> * 低层模块指的是被调用端，实现了基础的、主要的原子逻辑
> * 这里的"抽象"在 Java 语言中指的是接口或者抽象类
> * 这里的"细节"在 Java 语言中指的是具体的实现类

依赖倒置原则的核心思想是面向接口编程。为了消解两个模块之间的耦合关系，应该在两个模块之间定义一个抽象层，该层是由高层模块抽象出来的规范，高层模块依赖该抽象层，低层模块实现该抽象层，这样整个依赖关系由高低层之间的强耦合变为了高低层分别与抽象层之间的强耦合，也就松散了高低层之间的耦合度。这个变化过程有两个地方体现了“依赖倒置”：

* 在有抽象层之前，高层模块是直接依赖低层模块的，所以必须先实现低层模块才能实现高层模块；而有了抽象层之后，可以先实现高层模块，然后根据需求和抽象层提供的规范，再实现低层模块。即依赖模块实现的顺序发生了“倒置”
* 在有抽象层之前，高层模块需要在内部创建对低层模块的依赖；而有了抽象层后，因为高层模块依赖的是抽象层而不是具体实现，所以要将具体实现即低层模块从外部注入到高层模块。即依赖对象由内部创建向由外部注入“倒置”

实践依赖倒置原则就用到了控制反转的思想。

## 控制反转

控制反转(Inversion of Control，简称 IoC)是一种设计思想，是一种面向对象编程的法则，指的是将创建被依赖对象的控制权移交给 Ioc 容器，容器负责被依赖对象的创建方式和创建时机，并将其注入到需求方，使被依赖对象由需求方的内部创建反转为容器的外部注入。

控制反转有下面几种常见的实现方式：

* 依赖注入
* 依赖查找
* 依赖拖拽

## 依赖注入

依赖注入(Dependence Injecttion，简称 DI)与控制反转是对同一概念的不同角度的描述，也可以将依赖注入理解为实现控制反转的一种方式。依赖注入主要有三种注入方式：

* 构造器注入(Constructor Injection)
* setter 方法注入(Setter Injection)
* 接口注入(Interface Injection)

# 接口隔离原则

接口隔离原则(Interface Segregation Principle，简称 ISP)的定义是：
> 客户端不应该依赖它不需要的接口。简单点说就是，类间的依赖关系应该建立在最小的接口上。

接口隔离原则指的是将庞大、臃肿的接口拆分成粒度更小更具体的接口，来实现系统解耦，从而更容易重构、更改和重新部署。

单一职责原则、开闭原则、里氏替换原则、接口隔离原则和依赖倒置原则简称为 SOLID 原则。

# 迪米特原则

迪米特原则(Law of Demeter，简称 LoD)又称为最少知道原则(Least Knowledge Principle，简称 LKP),其定义是：
> 一个对象应该对其他对象有最少的了解。

类与类之间关系越密切，耦合度就越大，当一个类发生改变时，对另一个影响就越大。迪米特法则就要求一个类应该对自己要耦合的类知道得要尽可能的少。该法则还有一个英文解释：
> Only talk to your immedate friends

# Ref

* [Design Patterns](http://www.oodesign.com/)
* [java-design-patterns](https://github.com/iluwatar/java-design-patterns?utm_source=gold_browser_extension)
* [Inversion of Control](https://martinfowler.com/bliki/InversionOfControl.html)
* [Inversion of Control Containers and the Dependency Injection pattern](https://martinfowler.com/articles/injection.html)
* [向依赖关系宣战|依赖倒置、控制反转和依赖注入辨析](http://zqpythonic.qiniucdn.com/data/20070605105343/index.html)
* [抛弃依赖倒置原则](http://blog.csdn.net/yqj2065/article/details/70941763)
* [依赖注入和控制反转的理解](http://blog.csdn.net/bestone0213/article/details/47424255)
